[tox]
envlist = pytest
skipsdist=True

[gh-actions]
python =
    3.7: py37, pytest
    3.8: py38, pytest
    3.9: py39, pytest
    3.10: py310, pytest

[testenv]
deps = 
    -rrequirements-test.txt
passenv =
    PYTHONPATH

[testenv:pytest]
commands =
    pytest \
        -o log_cli=true \
        -o log_cli_level="INFO" \
        -o log_cli_format="%(asctime)s [%(levelname)8s] %(message)s (%(filename)s:%(lineno)s)" \
        -o log_cli_date_format="%Y-%m-%d %H:%M:%S" \
        -o log_file="tests/logs/pytest.log" \
        -o log_file_level="INFO" \
        -o log_file_format="%(asctime)s [%(levelname)8s] %(message)s (%(filename)s:%(lineno)s)" \
        -o log_file_date_format="%Y-%m-%d %H:%M:%S" \
        tests/

[testenv:format]
commands = 
    black --line-length=120 sudoku_ocr/ tests/
    isort --recursive .

[isort]
profile = black
skip =
    .git,.github,.venv,.vscode,__pycache__,
    .mypy_cache,*.pyc,.local,.tox

[testenv:flake8]
commands =
    flake8 .

[flake8]
count = True
exclude =
    .git,.github,.venv,.vscode,__pycache__,
    .mypy_cache,*.pyc,.local,.tox
max-complexity = 9
radon-max-cc = 9
max-line-length = 120
ignore =
    D100,   # Missing docstring in publiv module
per-file-ignores =
    # Imported but unused
    # Missing docstring in public package
    __init__.py: F401, D104
tee = True